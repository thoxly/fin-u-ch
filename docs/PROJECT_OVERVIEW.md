# PROJECT_OVERVIEW

## Цель

Простый финучёт для малых команд с план-факт анализом (БДДС) и базовыми отчётами (ОДДС), операциями и дашбордом.

## Модель доступа

Multi-tenant (Компания → Пользователи с одинаковыми правами в MVP).

## Ключевые возможности v1

### Дашборд

- Доходы/расходы/чистая прибыль + остатки на счетах
- Фильтры период/план/факт

### Операции

- Поступление/списание/перевод
- Контрагент
- Статья
- Сделка
- Периодичность (рекуррентные)

### Планирование БДДС

- Таблица по месяцам
- Деталь по статьям
- Плановые операции (повторяемые)

### Отчёт ОДДС

- По видам деятельности: операционная/инвестиционная/финансовая
- Помесячно

### Справочники

- Статьи
- Счета
- Подразделения
- Контрагенты
- Сделки
- Зарплаты

## Нефункциональные требования

### Масштабирование

- До 1000 пользователей (тенантов) суммарно
- Монорепо

### Технологический стек

| Категория            | Технология                                   |
| -------------------- | -------------------------------------------- |
| **Frontend**         | React18 + TypeScript + Vite + Tailwind       |
| **State Management** | Redux Toolkit + RTK Query                    |
| **Backend**          | Node18 + Express + TypeScript                |
| **ORM**              | Prisma                                       |
| **База данных**      | PostgreSQL (multi-tenant)                    |
| **Cache**            | Redis                                        |
| **Reverse Proxy**    | Nginx                                        |
| **Аутентификация**   | JWT + bcryptjs                               |
| **API Docs**         | OpenAPI (swagger-jsdoc + swagger-ui-express) |
| **Testing**          | Jest (unit/integration) + Playwright (E2E)   |
| **Монорепо**         | pnpm workspaces                              |
| **CI/CD**            | GitHub Actions + Docker + VPS                |
| **Версионирование**  | Semantic Versioning (SemVer)                 |

### CI/CD (MVP)

#### Репозиторий

- GitHub (git-flow: feature / dev / main)

#### Проверки в PR

- ESLint + Prettier + минимальные unit-тесты

#### Автоматический деплой

## UI Flow

### Рабочий стол

- **Фильтры**: период, переключатель план/факт/оба.
- **Блоки**:
  - (1) Доходы/Расходы/Чистая прибыль (график, суммарные KPI)
  - (2) Остатки на счетах (таблица/бар)
- **Таблица «Доходы-Расходы»** — переключатели добавляют/убирают колонки.

### Операции

- **Фильтры**: Тип, Период, Статья, Контрагент, Сделка.
- **Кнопка «Добавить»**: форма с типом (income/expense/transfer), дата, сумма, счёт(а), статья, контрагент, сделка, повторять (создать PlanItem или Recurrence? → в MVP: повторяемость относится к плану, а факт — руками или через зарплатный генератор).

### Планирование (БДДС)

- **Таблица помесячно**; стрелки раскрытия по иерархии статей.
- **«Добавить план»**: форма PlanItem (тип, период, сумма, repeat, статья, счёт/источник/приёмник, контрагент/сделка/подразделение, описание).

### Отчёты ОДДС

- **Период**, фильтр по видам деятельности, тумблер «без округления».
- **Фиксированная первая колонка** (иерархия activity → type → статьи), колонки — месяцы.

## Границы MVP

### Ограничения

- Роли одинаковые внутри компании
- Только ОДДС + план-факт по БДДС; ОПиУ позже
- Без импорта банковских выписок (можно добавить как next step)
