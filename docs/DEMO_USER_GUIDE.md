# Демо-пользователь - Руководство

## Обзор

Демо-пользователь предоставляет полный доступ к системе с предзаполненными данными для демонстрации возможностей Fin-U-CH клиентам и для тестирования.

## Учетные данные

- **Email:** `demo@example.com`
- **Пароль:** `demo123`
- **Компания:** Демо Компания ООО

## Возможности

### Автоматическое создание

- Демо-пользователь создается автоматически при деплое на продакшен
- Включает полный набор моковых данных
- Обновляется при каждом деплое

### Моковые данные

- **Операции:** 50+ операций за последние 6 месяцев
- **Планы:** Ежемесячные, квартальные и годовые планы
- **Счета:** Расчетный счет, касса, валютный счет
- **Статьи:** Полная иерархия статей доходов и расходов
- **Контрагенты:** Поставщики, клиенты, сотрудники, госорганы
- **Сделки:** Примеры проектов и контрактов
- **Зарплаты:** Настроенные правила расчета зарплат

### Типы операций

- **Доходы:** Выручка от продаж, прочие доходы
- **Расходы:** Зарплата, аренда, коммунальные услуги, маркетинг, закупки, налоги
- **Инвестиции:** Покупка оборудования, нематериальные активы
- **Финансы:** Проценты по кредитам, погашение кредитов
- **Переводы:** Между счетами

## API Endpoints

### Получить учетные данные

```http
GET /api/demo/credentials
```

**Ответ:**

```json
{
  "success": true,
  "data": {
    "email": "demo@example.com",
    "password": "demo123",
    "companyName": "Демо Компания ООО"
  }
}
```

### Проверить существование

```http
GET /api/demo/exists
```

**Ответ:**

```json
{
  "success": true,
  "exists": true
}
```

### Получить информацию

```http
GET /api/demo/info
```

**Ответ:**

```json
{
  "success": true,
  "data": {
    "user": {
      "id": "user-id",
      "email": "demo@example.com",
      "isActive": true
    },
    "company": {
      "id": "company-id",
      "name": "Демо Компания ООО",
      "currencyBase": "RUB"
    },
    "operationsCount": 50,
    "plansCount": 7,
    "accountsCount": 4,
    "articlesCount": 25,
    "counterpartiesCount": 10
  }
}
```

### Создать демо-пользователя

```http
POST /api/demo/create
```

### Удалить демо-пользователя

```http
DELETE /api/demo/delete
```

## Использование в разработке

### Локальная настройка

```bash
# Создать демо-пользователя
pnpm demo:create

# Создать демо-пользователя для продакшена
pnpm demo:production
```

### Тестирование

```bash
# Запустить unit тесты
pnpm test

# Запустить E2E тесты
pnpm test:e2e
```

## Интеграция в CI/CD

Демо-пользователь автоматически создается при деплое на продакшен:

1. **Миграции** - применяются изменения схемы БД
2. **Демо-пользователь** - создается/обновляется с моковыми данными
3. **Health Check** - проверяется работоспособность

## Компоненты фронтенда

### DemoCredentials

Компонент для отображения демо-кредов на публичных страницах:

```tsx
import { DemoCredentials } from '@/components/DemoCredentials';

<DemoCredentials className="mb-4" />;
```

**Возможности:**

- Отображение учетных данных
- Копирование в буфер обмена
- Показ/скрытие пароля
- Быстрый вход в систему

## Безопасность

### Ограничения

- Демо-пользователь имеет полный доступ к системе
- Данные изолированы в отдельной компании
- Не влияет на реальные данные пользователей

### Рекомендации

- Использовать только для демонстрации
- Не использовать для продакшн-данных
- Регулярно обновлять демо-данные

## Мониторинг

### Логи

Все действия с демо-пользователем логируются:

- Создание/удаление
- Входы в систему
- Ошибки при создании данных

### Метрики

- Количество входов
- Время использования
- Популярные функции

## Устранение неполадок

### Демо-пользователь не создается

1. Проверить подключение к БД
2. Проверить права доступа
3. Проверить логи приложения

### Нет моковых данных

1. Проверить выполнение скрипта создания
2. Проверить наличие справочников
3. Пересоздать демо-пользователя

### Ошибки API

1. Проверить статус сервиса
2. Проверить логи API
3. Проверить конфигурацию

## Обновление

### Добавление новых данных

1. Обновить `DemoUserService`
2. Добавить тесты
3. Обновить документацию

### Изменение структуры

1. Обновить миграции
2. Обновить сервис
3. Обновить тесты
4. Протестировать на staging

## Контакты

При возникновении проблем с демо-пользователем:

- Создать issue в репозитории
- Обратиться к команде разработки
- Проверить документацию API
