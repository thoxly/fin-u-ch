# –§–ê–ó–ê 4: Worker (—Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏) - –°–≤–æ–¥–∫–∞

## ‚úÖ –°—Ç–∞—Ç—É—Å: –ó–ê–í–ï–†–®–ï–ù–ê

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω Worker –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∑–∞—Ä–ø–ª–∞—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.

## –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### üèó –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

- Node.js Worker —Å TypeScript
- node-cron –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–¥–∞—á
- Prisma Client –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- Winston –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- Nodemon –¥–ª—è hot-reload

### ‚öôÔ∏è –ó–∞–¥–∞—á–∏

**–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞—Ä–ø–ª–∞—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π**:

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ 1-–≥–æ —á–∏—Å–ª–∞ –∫–∞–∂–¥–æ–≥–æ –º–µ—Å—è—Ü–∞ –≤ 00:00
- –°–æ–∑–¥–∞–Ω–∏–µ 3 –æ–ø–µ—Ä–∞—Ü–∏–π –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞—Ä–ø–ª–∞—Ç—ã:
  - –§–û–¢ (—Ñ–æ–Ω–¥ –æ–ø–ª–∞—Ç—ã —Ç—Ä—É–¥–∞)
  - –°—Ç—Ä–∞—Ö–æ–≤—ã–µ –≤–∑–Ω–æ—Å—ã (30%)
  - –ù–î–§–õ (13%)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ç–∞—Ç–µ–π —Ä–∞—Å—Ö–æ–¥–æ–≤
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ multi-tenant

### üéØ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- Graceful shutdown
- –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
- –£—á–µ—Ç –ø–µ—Ä–∏–æ–¥–æ–≤ –¥–µ–π—Å—Ç–≤–∏—è (effectiveFrom/To)
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–§–∞–π–ª–æ–≤ —Å–æ–∑–¥–∞–Ω–æ**: 8
- **–°—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞**: ~400
- **Cron-–∑–∞–¥–∞—á**: 1
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**: 4 runtime + 5 dev

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
apps/worker/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ config/        # env, logger, prisma
‚îÇ   ‚îú‚îÄ‚îÄ jobs/          # salary.generate.monthly
‚îÇ   ‚îî‚îÄ‚îÄ index.ts       # cron scheduler
‚îú‚îÄ‚îÄ prisma/
‚îÇ   ‚îî‚îÄ‚îÄ schema.prisma
‚îî‚îÄ‚îÄ package.json
```

## –ó–∞–ø—É—Å–∫

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
cd apps/worker && pnpm install

# 2. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å Prisma Client
npx prisma generate

# 3. –°–æ–∑–¥–∞—Ç—å .env (DATABASE_URL)

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å
pnpm dev  # development
pnpm start  # production
```

## –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ

| –ó–∞–¥–∞—á–∞            | –ö–æ–≥–¥–∞             | –î–µ–π—Å—Ç–≤–∏–µ                          |
| ----------------- | ----------------- | --------------------------------- |
| –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞—Ä–ø–ª–∞—Ç | 1-–µ —á–∏—Å–ª–æ –≤ 00:00 | –°–æ–∑–¥–∞–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞ —Ç–µ–∫—É—â–∏–π –º–µ—Å—è—Ü |

## –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã

1. –°–æ–∑–¥–∞—Ç—å Counterparty (category: employee)
2. –°–æ–∑–¥–∞—Ç—å Salary –¥–ª—è —ç—Ç–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å Worker
4. 1-–≥–æ —á–∏—Å–ª–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–¥—É—Ç—Å—è 3 –æ–ø–µ—Ä–∞—Ü–∏–∏

## –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥

**–§–ê–ó–ê 5**: Frontend (React + Vite + Redux Toolkit)

---

–ü–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç—á–µ—Ç: [docs/PHASE4_RESULTS.md](docs/PHASE4_RESULTS.md)
