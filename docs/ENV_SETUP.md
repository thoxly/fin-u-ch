# ะฃะฟัะฐะฒะปะตะฝะธะต ะฟะตัะตะผะตะฝะฝัะผะธ ะพะบััะถะตะฝะธั

## ๐ ะะฐะบ ััะพ ัะฐะฑะพัะฐะตั

### ะกัะตะผะฐ ัะฐะฑะพัั env.example ะธ .env

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                         GITHUB                              โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ      โ
โ  โ  env.example (ะฒ ัะตะฟะพะทะธัะพัะธะธ)                      โ      โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ      โ
โ  โ  # ะจะฐะฑะปะพะฝ ั ะฟัะธะผะตัะฐะผะธ (ะะะ ัะตะฐะปัะฝัั ัะตะบัะตัะพะฒ)    โ      โ
โ  โ  DATABASE_URL=postgresql://postgres:postgres@...  โ      โ
โ  โ  JWT_SECRET=your-secret-here                      โ      โ
โ  โ  VITE_API_URL=http://localhost:4000               โ      โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                            โ git clone
                            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                  ะะะะะะฌะะะฏ ะะะจะะะ                           โ
โ                                                             โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ            โ
โ  โ  env.example (ัะบะพะฟะธัะพะฒะฐะฝ ะธะท Git)           โ            โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ            โ
โ                      โ cp env.example .env                 โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ            โ
โ  โ  .env (ะฒะฐั ะปะธัะฝัะน ัะฐะนะป, ะะ ะฒ Git)          โ            โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ            โ
โ  โ  # ะะตะฐะปัะฝัะต ะดะฐะฝะฝัะต ะดะปั ะะะจะะ ะผะฐัะธะฝั        โ            โ
โ  โ  DATABASE_URL=postgresql://postgres:...    โ            โ
โ  โ  JWT_SECRET=abc123real...                  โ            โ
โ  โ  VITE_API_URL=http://localhost:4000        โ            โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ            โ
โ                      โ ะธัะฟะพะปัะทัะตััั ะฟัะธะปะพะถะตะฝะธะตะผ            โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ            โ
โ  โ  API, Web, Worker ัะธัะฐัั ะธะท .env           โ            โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ะะฐะถะฝะพ ะฟะพะฝะธะผะฐัั:**

- `env.example` - ััะพ ัะฐะฑะปะพะฝ ะฒ Git (ะฑะตะทะพะฟะฐัะฝะพ ะบะพะผะผะธัะธัั)
- `.env` - ะฒะฐัะธ ะปะธัะฝัะต ะดะฐะฝะฝัะต ะปะพะบะฐะปัะฝะพ (ะะ ะฒ Git, ะฒ .gitignore)

## ะกัััะบัััะฐ ENV ัะฐะนะปะพะฒ

ะ ััะพะผ ะฟัะพะตะบัะต ะธัะฟะพะปัะทัะตััั **ะพะดะธะฝ ENV ัะฐะนะป ะฒ ะบะพัะฝะต ะผะพะฝะพัะตะฟะพะทะธัะพัะธั** ะดะปั ะฒัะตั ะฟัะธะปะพะถะตะฝะธะน (api, web, worker).

- ะัะต ะฟัะธะปะพะถะตะฝะธั ะธัะฟะพะปัะทััั ะพะฑัะธะต ัะตัะฒะธัั (PostgreSQL, Redis)
- ะะตั ะดัะฑะปะธัะพะฒะฐะฝะธั ะฟะตัะตะผะตะฝะฝัั
- ะัะพัะต ัะฟัะฐะฒะปััั ะธ ัะธะฝััะพะฝะธะทะธัะพะฒะฐัั
- ะะตะฝััะต ะฒะตัะพััะฝะพััั ะพัะธะฑะพะบ ะบะพะฝัะธะณััะฐัะธะธ
- ะฃะดะพะฑะฝะพ ะดะปั ะผะพะฝะพัะตะฟะพ ะฐััะธัะตะบัััั

### ะคะฐะนะปั ะฒ ะฟัะพะตะบัะต

```
/
โโโ env.example            # โ ะ Git - ะจะะะะะ ั ะฟัะธะผะตัะฐะผะธ (ะะะ ัะตะฐะปัะฝัั ัะตะบัะตัะพะฒ)
โโโ .env                   # โ ะะ ะฒ Git - ะขะตะบััะตะต ะพะบััะถะตะฝะธะต (development ะฟะพ ัะผะพะปัะฐะฝะธั)
โโโ .env.development       # โ ะะ ะฒ Git - Development (ะพะฟัะธะพะฝะฐะปัะฝะพ)
โโโ .env.production        # โ ะะ ะฒ Git - Production (ัะพะทะดะฐะตััั ะฟะตัะตะด ะดะตะฟะปะพะตะผ)
```

**ะัะธะผะตัะฐะฝะธะต:** ะัะพะตะบั ะธัะฟะพะปัะทัะตั 2 ะพะบััะถะตะฝะธั - Development ะธ Production.

### ๐ ะะฐะถะฝะพ ะฟะพะฝะธะผะฐัั:

**`env.example` (ะฒ Git โ):**

- ะคะฐะนะป-ัะฐะฑะปะพะฝ, ะบะพัะพััะน ะะะะะะะะข ะฒ GitHub
- ะกะพะดะตัะถะธั ะฟัะธะผะตัั ะฟะตัะตะผะตะฝะฝัั ะะะ ัะตะฐะปัะฝัั ัะตะบัะตัะพะฒ
- ะะพะบะฐะทัะฒะฐะตั ะบะฐะบะธะต ะฟะตัะตะผะตะฝะฝัะต ะฝัะถะฝั ะฟัะพะตะบัั
- ะัะธะผะตั: `JWT_SECRET=your-secret-here`

**`.env` (ะะ ะฒ Git โ):**ะฝ

- ะะฐั ะปะธัะฝัะน ัะฐะนะป ั ะะะะะฌะะซะะ ะดะฐะฝะฝัะผะธ
- ะะ ะฟะพะฟะฐะดะฐะตั ะฒ GitHub (ะทะฐัะธัะตะฝ .gitignore)
- ะกะพะทะดะฐะตััั ะบะฐะถะดัะผ ัะฐะทัะฐะฑะพััะธะบะพะผ ะปะพะบะฐะปัะฝะพ ะธะท `env.example`
- ะกะพะดะตัะถะธั ัะตะฐะปัะฝัะต ะฟะฐัะพะปะธ, API ะบะปััะธ, ัะตะบัะตัั

### ๐ ะัะบัะดะฐ ัะฐะทัะฐะฑะพััะธะบั ัะทะฝะฐัั ัะตะฐะปัะฝัะต ะดะฐะฝะฝัะต?

1. **ะะพะบะฐะปัะฝะฐั ัะฐะทัะฐะฑะพัะบะฐ (Development)** - ะธัะฟะพะปัะทัะนัะต ะทะฝะฐัะตะฝะธั ะธะท `env.example` (ะพะฝะธ ัะฐะฑะพัะธะต ะดะปั Docker)
2. **Production** - ะฟะพะปััะธัะต credentials ะพั:
   - ะขะธะผะปะธะดะฐ / DevOps
   - ะะตะทะพะฟะฐัะฝะพะณะพ ััะฐะฝะธะปะธัะฐ (1Password, Bitwarden, Vault)
   - CI/CD secrets (GitHub Secrets, GitLab Variables)
   - ะะพะบัะผะตะฝัะฐัะธะธ ะบะพะผะฐะฝะดั / VPS ัะตัะฒะตัะฐ

## ะัััััะน ััะฐัั

### 1. ะกะพะทะดะฐะฝะธะต .env ัะฐะนะปะฐ ะดะปั ัะฐะทัะฐะฑะพัะบะธ

#### ะะฒัะพะผะฐัะธัะตัะบะธะน ัะฟะพัะพะฑ (ัะตะบะพะผะตะฝะดัะตััั, ัะฐะฑะพัะฐะตั ะฝะฐ ะฒัะตั ะะก)

```bash
# ะัะฟะพะปัะทัะนัะต ะณะพัะพะฒัะน ะบัะพัั-ะฟะปะฐััะพัะผะตะฝะฝัะน ัะบัะธะฟั
pnpm env:setup
```

ะญัะพั ัะบัะธะฟั ะฐะฒัะพะผะฐัะธัะตัะบะธ:

- ะัะพะฒะตัะธั ะฝะฐะปะธัะธะต `.env` ัะฐะนะปะฐ
- ะกะบะพะฟะธััะตั `env.example` โ `.env` ะตัะปะธ ะฝัะถะฝะพ
- ะัะฒะตะดะตั ะฟะพะดัะบะฐะทะบะธ ะดะปั ัะปะตะดัััะธั ัะฐะณะพะฒ

**ะะฐะถะฝะพ:** ะกะบัะธะฟั ัะฐะฑะพัะฐะตั ะฝะฐ Windows, macOS ะธ Linux!

#### ะััะฝะพะน ัะฟะพัะพะฑ

<details>
<summary>macOS / Linux</summary>

```bash
# ะกะบะพะฟะธััะนัะต ัะฐะฑะปะพะฝ
cp env.example .env

# ะััะตะดะฐะบัะธััะนัะต ะทะฝะฐัะตะฝะธั
nano .env
```

</details>

<details>
<summary>Windows (PowerShell)</summary>

```powershell
# ะกะบะพะฟะธััะนัะต ัะฐะฑะปะพะฝ
Copy-Item env.example .env

# ะััะตะดะฐะบัะธััะนัะต ะทะฝะฐัะตะฝะธั
notepad .env
```

</details>

<details>
<summary>Windows (CMD)</summary>

```cmd
# ะกะบะพะฟะธััะนัะต ัะฐะฑะปะพะฝ
copy env.example .env

# ะััะตะดะฐะบัะธััะนัะต ะทะฝะฐัะตะฝะธั
notepad .env
```

</details>

**ะะฑัััะฝะตะฝะธะต:**

- `env.example` - ััะพ ัะฐะฑะปะพะฝ ะธะท Git (ัะถะต ะตััั ะฒ ะฟัะพะตะบัะต)
- `.env` - ะฒะฐั ะปะธัะฝัะน ัะฐะนะป (ัะพะทะดะฐะตััั ะปะพะบะฐะปัะฝะพ, ะฝะต ะฟะพะฟะฐะดะตั ะฒ Git)
- ะะปั ะปะพะบะฐะปัะฝะพะน ัะฐะทัะฐะฑะพัะบะธ ะทะฝะฐัะตะฝะธั ะธะท `env.example` ัะถะต ะณะพัะพะฒั ะบ ัะฐะฑะพัะต!

### 2. ะะธะฝะธะผะฐะปัะฝะฐั ะบะพะฝัะธะณััะฐัะธั ะดะปั ะปะพะบะฐะปัะฝะพะน ัะฐะทัะฐะฑะพัะบะธ

```env
# ะัะฝะพะฒะฝะพะต
NODE_ENV=development
PORT=4000

# ะะฐะทะฐ ะดะฐะฝะฝัั (ะปะพะบะฐะปัะฝัะน Docker)
# ะกัะฐะฝะดะฐััะฝัะต ะฟะพััั ะดะปั docker-compose.yml (ัะตะบะพะผะตะฝะดัะตััั)
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/fin_u_ch_dev

# Redis (ะปะพะบะฐะปัะฝัะน Docker)
REDIS_URL=redis://localhost:6379

# JWT
JWT_SECRET=your-dev-secret-here
JWT_ACCESS_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# Frontend
# ะัะฟะพะปัะทัะนัะต /api ะดะปั ัะฐะฑะพัั ัะตัะตะท Vite proxy (ะฝะฐัััะพะตะฝ ะฒ vite.config.ts)
VITE_API_URL=/api
```

**ะัะธะผะตัะฐะฝะธะต ะพ ะฟะพััะฐั:**

| ะกัะตะฝะฐัะธะน                      | PostgreSQL | Redis | ะคะฐะนะป compose               |
| ----------------------------- | ---------- | ----- | -------------------------- |
| **ะะธะฑัะธะดะฝัะน (ัะตะบะพะผะตะฝะดัะตััั)** | 5432       | 6379  | `docker-compose.yml`       |
| **ะะพะปะฝัะน Docker ััะตะบ**        | 5433       | 6380  | `docker-compose.local.yml` |

- **ะะธะฑัะธะดะฝัะน:** Docker ัะพะปัะบะพ ะดะปั ะะ/Redis, ะฟัะธะปะพะถะตะฝะธั ะปะพะบะฐะปัะฝะพ (ะณะพัััะฐั ะฟะตัะตะทะฐะณััะทะบะฐ)
- **ะะพะปะฝัะน Docker:** ะัั ะฒ Docker ะดะปั ัะตััะธัะพะฒะฐะฝะธั production-ะฟะพะดะพะฑะฝะพะณะพ ะพะบััะถะตะฝะธั
- ะะตััะฐะฝะดะฐััะฝัะต ะฟะพััั (5433, 6380) ะฝัะถะฝั ะดะปั ะธะทะฑะตะถะฐะฝะธั ะบะพะฝัะปะธะบัะพะฒ ะฟัะธ ะพะดะฝะพะฒัะตะผะตะฝะฝะพะน ัะฐะฑะพัะต

### 3. ะะฐะฟััะบ ะฟัะพะตะบัะฐ

```bash
# ะะฐะฟัััะธัะต Docker ัะตัะฒะธัั
docker-compose -f ops/docker/docker-compose.yml up -d

# ะฃััะฐะฝะพะฒะธัะต ะทะฐะฒะธัะธะผะพััะธ
pnpm install

# ะัะธะผะตะฝะธัะต ะผะธะณัะฐัะธะธ
pnpm --filter api prisma:migrate:dev

# ะะฐะฟัััะธัะต ะฟัะธะปะพะถะตะฝะธั
pnpm dev
```

## ะะฐัััะพะนะบะฐ ะดะปั ัะฐะทะฝัั ะพะบััะถะตะฝะธะน

### Development (ะะพะบะฐะปัะฝะฐั ัะฐะทัะฐะฑะพัะบะฐ)

**ะะธะฑัะธะดะฝัะน ัะตะถะธะผ (ัะตะบะพะผะตะฝะดัะตััั):**

```bash
# .env
NODE_ENV=development
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/fin_u_ch_dev
REDIS_URL=redis://localhost:6379
VITE_API_URL=/api  # ะงะตัะตะท Vite proxy
JWT_SECRET=dev-secret-change-in-production
```

**ะะพะปะฝัะน Docker ััะตะบ (ะดะปั ัะตััะธัะพะฒะฐะฝะธั):**

```bash
# .env
NODE_ENV=development
DATABASE_URL=postgresql://postgres:postgres@localhost:5433/fin_u_ch_dev
REDIS_URL=redis://localhost:6380
VITE_API_URL=/api
JWT_SECRET=dev-secret-change-in-production
```

### Production (ะัะพะดะฐะบัะตะฝ)

```bash
# .env.production (ัะพะทะดะฐะตััั ะฟะตัะตะด ะดะตะฟะปะพะตะผ ะฝะฐ VPS)
NODE_ENV=production
DATABASE_URL=postgresql://user:password@your-vps-ip:5432/fin_u_ch
REDIS_URL=redis://:password@your-vps-ip:6379
VITE_API_URL=/api
JWT_SECRET=$(openssl rand -hex 32)  # ะกะณะตะฝะตัะธััะนัะต ะฝะพะฒัะน!
```

## ะะตัะตะบะปััะตะฝะธะต ะผะตะถะดั ะพะบััะถะตะฝะธัะผะธ

### ะกะฟะพัะพะฑ 1: ะะพะฟะธัะพะฒะฐะฝะธะต ัะฐะนะปะฐ

```bash
# ะะตัะตะบะปััะธัััั ะฝะฐ production
cp .env.production .env

# ะะตัะฝััััั ะฝะฐ development
cp .env.development .env
```

### ะกะฟะพัะพะฑ 2: ะกะธะผะฒะพะปะธัะตัะบะธะต ัััะปะบะธ

```bash
# ะกะพะทะดะฐัั ัััะปะบั ะฝะฐ production
ln -sf .env.production .env

# ะกะพะทะดะฐัั ัััะปะบั ะฝะฐ development
ln -sf .env.development .env
```

### ะกะฟะพัะพะฑ 3: ะกะบัะธะฟั (ัะตะบะพะผะตะฝะดัะตััั)

ะฃ ะฒะฐั ัะถะต ะตััั ะณะพัะพะฒัะน ัะบัะธะฟั `scripts/switch-env.sh`:

```bash
# ะะตัะตะบะปััะธัััั ะฝะฐ development
pnpm env:dev

# ะะตัะตะบะปััะธัััั ะฝะฐ production
pnpm env:prod

# ะะพะบะฐะทะฐัั ัะตะบััะตะต ะพะบััะถะตะฝะธะต
pnpm env:current
```

## ะงัะตะฝะธะต ENV ะฒ ะฟัะธะปะพะถะตะฝะธัั

### API (Node.js)

```typescript
// apps/api/src/config/env.ts
import dotenv from 'dotenv';

// ะะฐะณััะถะฐะตั .env ะธะท ะบะพัะฝั ะฟัะพะตะบัะฐ
dotenv.config({ path: '../../.env' });

export const env = {
  NODE_ENV: process.env.NODE_ENV || 'development',
  PORT: parseInt(process.env.PORT || '4000', 10),
  DATABASE_URL: process.env.DATABASE_URL || '',
  // ...
};
```

### Worker (Node.js)

```typescript
// apps/worker/src/config/env.ts
import dotenv from 'dotenv';

dotenv.config({ path: '../../.env' });

export const env = {
  NODE_ENV: process.env.NODE_ENV || 'development',
  DATABASE_URL: process.env.DATABASE_URL!,
};
```

### Web (Vite)

```typescript
// apps/web/src/shared/config/env.ts
export const config = {
  apiUrl: import.meta.env.VITE_API_URL || '/api',
  isDevelopment: import.meta.env.DEV,
  isProduction: import.meta.env.PROD,
};
```

**ะะฐะถะฝะพ:** Vite ััะตะฑัะตั ะฟัะตัะธะบั `VITE_` ะดะปั ะฟะตัะตะผะตะฝะฝัั, ะดะพัััะฟะฝัั ะฒ ะฑัะฐัะทะตัะต!

## Docker ะธ CI/CD

### Docker Compose (ะะพะบะฐะปัะฝะฐั ัะฐะทัะฐะฑะพัะบะฐ)

```yaml
# ops/docker/docker-compose.yml
services:
  api:
    environment:
      - DATABASE_URL=${DATABASE_URL}
      - REDIS_URL=${REDIS_URL}
      - JWT_SECRET=${JWT_SECRET}
```

Docker Compose ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะธัะฐะตั `.env` ะธะท ัะตะบััะตะน ะดะธัะตะบัะพัะธะธ.

### Docker Compose (Production)

```bash
# ะัะฟะพะปัะทะพะฒะฐะฝะธะต ะบะพะฝะบัะตัะฝะพะณะพ env ัะฐะนะปะฐ
docker-compose -f ops/docker/docker-compose.prod.yml --env-file .env.production up -d
```

### GitHub Actions

```yaml
# .github/workflows/ci-cd.yml
- name: Deploy to production
  env:
    DATABASE_URL: ${{ secrets.DATABASE_URL }}
    REDIS_URL: ${{ secrets.REDIS_URL }}
    JWT_SECRET: ${{ secrets.JWT_SECRET }}
  run: |
    docker-compose up -d
```

**ะะฐะถะฝะพ:** ะฅัะฐะฝะธัะต ัะตะบัะตัั ะฒ GitHub Secrets, ะฝะต ะฒ `.env` ัะฐะนะปะฐั!

### VPS Deployment

```bash
# ะะฐ VPS ัะตัะฒะตัะต ัะพะทะดะฐะนัะต .env.production
ssh user@your-vps.com
cd /opt/fin-u-ch
nano .env.production

# ะะฐัะตะผ ะธัะฟะพะปัะทัะนัะต ะตะณะพ ะฟัะธ ะดะตะฟะปะพะต
docker-compose -f ops/docker/docker-compose.prod.yml --env-file .env.production up -d
```

## ะะตะทะพะฟะฐัะฝะพััั ENV ัะฐะนะปะพะฒ

### โ DO (ะะตะปะฐะนัะต)

1. **ะฅัะฐะฝะธัะต `.env` ะฒ `.gitignore`**

   ```gitignore
   # .gitignore
   .env
   .env.local
   .env.*.local
   ```

2. **ะัะฟะพะปัะทัะนัะต ัะธะปัะฝัะต ัะตะบัะตัั ะฒ ะฟัะพะดะฐะบัะตะฝะต**

   ```bash
   # ะะตะฝะตัะฐัะธั JWT ัะตะบัะตัะฐ
   openssl rand -hex 32
   ```

3. **ะฅัะฐะฝะธัะต ัะตะบัะตัั ะฒ ะฑะตะทะพะฟะฐัะฝัั ััะฐะฝะธะปะธัะฐั:**
   - GitHub Secrets ะดะปั CI/CD
   - AWS Secrets Manager
   - HashiCorp Vault
   - 1Password / Bitwarden ะดะปั ะบะพะผะฐะฝะดั

4. **ะะพะบัะผะตะฝัะธััะนัะต ะฒัะต ะฟะตัะตะผะตะฝะฝัะต ะฒ `env.example`**

5. **ะัะฟะพะปัะทัะนัะต ัะฐะทะฝัะต ัะตะบัะตัั ะดะปั ะบะฐะถะดะพะณะพ ะพะบััะถะตะฝะธั**

### โ DON'T (ะะต ะดะตะปะฐะนัะต)

1. **ะะ ะบะพะผะผะธัััะต `.env` ัะฐะนะปั ะฒ Git**
2. **ะะ ะธัะฟะพะปัะทัะนัะต ะพะดะธะฝะฐะบะพะฒัะต ัะตะบัะตัั ะดะปั dev/prod**
3. **ะะ ััะฐะฝะธัะต ัะตะฐะปัะฝัะต API ะบะปััะธ ะฒ `env.example`**
4. **ะะ ัะฐัััะต `.env` ัะฐะนะปั ัะตัะตะท ะผะตััะตะฝะดะถะตัั**
5. **ะะ ะธัะฟะพะปัะทัะนัะต ะดะตัะพะปัะฝัะต ะฟะฐัะพะปะธ ะฒ ะฟัะพะดะฐะบัะตะฝะต**

## ะะฐะปะธะดะฐัะธั ENV ะฟะตัะตะผะตะฝะฝัั

### ะัะพะฒะตัะบะฐ ะพะฑัะทะฐัะตะปัะฝัั ะฟะตัะตะผะตะฝะฝัั

```typescript
// apps/api/src/config/env.ts
function validateEnv() {
  const required = ['DATABASE_URL', 'REDIS_URL', 'JWT_SECRET'];

  const missing = required.filter((key) => !process.env[key]);

  if (missing.length > 0) {
    throw new Error(`Missing required env variables: ${missing.join(', ')}`);
  }
}

validateEnv();
```

### ะัะฟะพะปัะทะพะฒะฐะฝะธะต ะฑะธะฑะปะธะพัะตะบ ะฒะฐะปะธะดะฐัะธะธ

```bash
pnpm add envalid
```

```typescript
import { cleanEnv, str, port, url } from 'envalid';

export const env = cleanEnv(process.env, {
  NODE_ENV: str({ choices: ['development', 'staging', 'production'] }),
  PORT: port({ default: 4000 }),
  DATABASE_URL: url(),
  REDIS_URL: url(),
  JWT_SECRET: str({ minLength: 32 }),
});
```

## Troubleshooting

### ะัะพะฑะปะตะผะฐ: "test" ะฝะต ัะฒะปัะตััั ะบะพะผะฐะฝะดะพะน (Windows)

**ะกะธะผะฟัะพะผั:**

```
"test" ะฝะต ัะฒะปัะตััั ะฒะฝัััะตะฝะฝะตะน ะธะปะธ ะฒะฝะตัะฝะตะน ะบะพะผะฐะฝะดะพะน
"cp" ะฝะต ัะฒะปัะตััั ะฒะฝัััะตะฝะฝะตะน ะธะปะธ ะฒะฝะตัะฝะตะน ะบะพะผะฐะฝะดะพะน
```

**ะะตัะตะฝะธะต:**

```bash
# ะัะฟะพะปัะทัะนัะต ะบัะพัั-ะฟะปะฐััะพัะผะตะฝะฝัะน ัะบัะธะฟั
pnpm env:setup

# ะะปะธ ะฒัััะฝัั (PowerShell)
Copy-Item env.example .env

# ะะปะธ ะฒัััะฝัั (CMD)
copy env.example .env
```

**ะะฑัััะฝะตะฝะธะต:** Unix ะบะพะผะฐะฝะดั (`test`, `cp`) ะฝะต ัะฐะฑะพัะฐัั ะฒ Windows CMD/PowerShell. ะัะฟะพะปัะทัะนัะต `pnpm env:setup` ะดะปั ะฒัะตั ะฟะปะฐััะพัะผ.

### ะัะพะฑะปะตะผะฐ: ะะตัะตะผะตะฝะฝัะต ะฝะต ัะธัะฐัััั

```bash
# ะัะพะฒะตัััะต ะฟััั ะบ .env ัะฐะนะปั
dotenv.config({ path: '../../.env', debug: true });

# ะะปะธ ะธัะฟะพะปัะทัะนัะต ะฐะฑัะพะปััะฝัะน ะฟััั
import path from 'path';
dotenv.config({ path: path.resolve(__dirname, '../../.env') });
```

### ะัะพะฑะปะตะผะฐ: VITE ะฟะตัะตะผะตะฝะฝัะต ะฝะตะดะพัััะฟะฝั

```typescript
// โ ะะ ะะะะะขะะะข ะฒ ะฑัะฐัะทะตัะต
const apiUrl = process.env.API_URL;

// โ ะะะะะขะะะข
const apiUrl = import.meta.env.VITE_API_URL;
```

### ะัะพะฑะปะตะผะฐ: Docker ะฝะต ะฒะธะดะธั ะฟะตัะตะผะตะฝะฝัะต

```bash
# ะฃะฑะตะดะธัะตัั ััะพ .env ะฒ ะบะพัะฝะต ะฟัะพะตะบัะฐ
ls -la | grep .env

# ะัะพะฒะตัััะต ััะพ docker-compose ะทะฐะฟััะบะฐะตััั ะธะท ะบะพัะฝั
docker-compose -f ops/docker/docker-compose.yml --env-file .env up
```

## ะะพะปะตะทะฝัะต ะบะพะผะฐะฝะดั

```bash
# ะกะพะทะดะฐัั .env ะธะท ะฟัะธะผะตัะฐ (ะบัะพัั-ะฟะปะฐััะพัะผะตะฝะฝะพ)
pnpm env:setup

# ะะพะบะฐะทะฐัั ัะตะบััะตะต ะพะบััะถะตะฝะธะต
pnpm env:current

# ะัะพะฒะตัะธัั ะฟะตัะตะผะตะฝะฝัะต ะฒ Docker
docker-compose config
```

<details>
<summary>Unix-ัะฟะตัะธัะธัะฝัะต ะบะพะผะฐะฝะดั (macOS/Linux)</summary>

```bash
# ะะพะบะฐะทะฐัั ัะตะบััะธะต ENV ะฟะตัะตะผะตะฝะฝัะต
printenv | grep FIN_U_CH

# ะัะพะฒะตัะธัั ัััะตััะฒะพะฒะฐะฝะธะต .env ัะฐะนะปะฐ
test -f .env && echo "โ .env exists" || echo "โ .env not found"

# ะกัะฐะฒะฝะธัั .env ั .env.example
diff .env env.example
```

</details>

<details>
<summary>Windows-ัะฟะตัะธัะธัะฝัะต ะบะพะผะฐะฝะดั (PowerShell)</summary>

```powershell
# ะะพะบะฐะทะฐัั ัะตะบััะธะต ENV ะฟะตัะตะผะตะฝะฝัะต
Get-ChildItem Env: | Where-Object { $_.Name -like "*FIN_U_CH*" }

# ะัะพะฒะตัะธัั ัััะตััะฒะพะฒะฐะฝะธะต .env ัะฐะนะปะฐ
Test-Path .env

# ะกัะฐะฒะฝะธัั .env ั .env.example
Compare-Object (Get-Content .env) (Get-Content env.example)
```

</details>

## ะะตะบะพะผะตะฝะดัะตะผัะน workflow ะดะปั ะบะพะผะฐะฝะดั

1. **ะะพะฒัะน ัะฐะทัะฐะฑะพััะธะบ:**

   ```bash
   # ะะปะพะฝะธััะนัะต ะฟัะพะตะบั
   git clone <repo>
   cd fin-u-ch

   # ะฃััะฐะฝะพะฒะธัะต ะทะฐะฒะธัะธะผะพััะธ
   pnpm install

   # ะกะพะทะดะฐะนัะต .env (ัะฐะฑะพัะฐะตั ะฝะฐ ะฒัะตั ะะก!)
   pnpm env:setup

   # ะะฐะฟัััะธัะต ะธะฝััะฐััััะบัััั
   docker-compose -f ops/docker/docker-compose.yml up -d

   # ะะฐะฟัััะธัะต ะฟัะพะตะบั
   pnpm dev
   ```

2. **ะะฑะฝะพะฒะปะตะฝะธะต ะฟะตัะตะผะตะฝะฝัั:**

   ```bash
   # ะะพะฑะฐะฒััะต ะฝะพะฒัั ะฟะตัะตะผะตะฝะฝัั ะฒ env.example
   # ะะฑะฝะพะฒะธัะต ะดะพะบัะผะตะฝัะฐัะธั
   # ะะพะผะผะธัััะต env.example
   git add env.example docs/ENV_SETUP.md
   git commit -m "Add new ENV variable: FEATURE_FLAG_X"
   ```

3. **ะะตะฟะปะพะน ะฒ ะฟัะพะดะฐะบัะตะฝ:**
   ```bash
   # ะกะพะทะดะฐะนัะต/ะพะฑะฝะพะฒะธัะต .env.production ะฝะฐ ัะตัะฒะตัะต
   ssh user@server
   nano .env.production
   # ะะตะฟะปะพะน
   docker-compose -f docker-compose.prod.yml --env-file .env.production up -d
   ```

## ๐ ะะพัััะฐั ะฟะตัะตะทะฐะณััะทะบะฐ (Hot Reload)

ะัะพะตะบั ะฝะฐัััะพะตะฝ ะดะปั ะฐะฒัะพะผะฐัะธัะตัะบะพะณะพ ะฟัะธะผะตะฝะตะฝะธั ะธะทะผะตะฝะตะฝะธะน ะฒ `.env`:

- **API ะธ Worker** - ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟะตัะตะทะฐะฟััะบะฐัััั ะฟัะธ ะธะทะผะตะฝะตะฝะธะธ `.env` (nodemon)
- **Web (Vite)** - ััะตะฑัะตั ัััะฝะพะณะพ ะฟะตัะตะทะฐะฟััะบะฐ ะดะปั `VITE_*` ะฟะตัะตะผะตะฝะฝัั

ะะพะดัะพะฑะฝะตะต: [ENV Hot Reload Guide](ENV_HOT_RELOAD.md)

## ๐ FAQ

### Q: ะะฐัะตะผ ะฝัะถะตะฝ env.example ะตัะปะธ ะตััั .env?

**A:** `env.example` - ััะพ ะดะพะบัะผะตะฝัะฐัะธั! ะะฝ ะฟะพะบะฐะทัะฒะฐะตั:

- ะะฐะบะธะต ะฟะตัะตะผะตะฝะฝัะต ะฝัะถะฝั ะฟัะพะตะบัั
- ะะฐะบะพะน ัะพัะผะฐั ะพะฝะธ ะดะพะปะถะฝั ะธะผะตัั
- ะัะธะผะตัั ะทะฝะฐัะตะฝะธะน ะดะปั ะปะพะบะฐะปัะฝะพะน ัะฐะทัะฐะฑะพัะบะธ

### Q: ะะพัะตะผั .env ะฝะต ะฒ Git?

**A:** ะะตะทะพะฟะฐัะฝะพััั! `.env` ัะพะดะตัะถะธั ัะตะฐะปัะฝัะต ัะตะบัะตัั:

- ะะฐัะพะปะธ ะพั ะะ
- API ะบะปััะธ
- JWT ัะตะบัะตัั
- ะัะปะธ ะฟะพะฟะฐะดะตั ะฒ Git โ ััะตัะบะฐ ะดะฐะฝะฝัั!

### Q: ะัะบัะดะฐ ะฝะพะฒัะน ัะฐะทัะฐะฑะพััะธะบ ัะทะฝะฐะตั credentials?

**A:** ะะฐะฒะธัะธั ะพั ะพะบััะถะตะฝะธั:

- **ะะพะบะฐะปัะฝะพ:** ะธะท `env.example` (ะณะพัะพะฒัะต ะทะฝะฐัะตะฝะธั)
- **Production:** ะพั ะบะพะผะฐะฝะดั (ะฑะตะทะพะฟะฐัะฝะพะต ััะฐะฝะธะปะธัะต)

### Q: ะงัะพ ะตัะปะธ ั ัะปััะฐะนะฝะพ ะทะฐะบะพะผะผะธัะธะป .env?

**A:** ะะตะผะตะดะปะตะฝะฝะพ:

1. ะฃะดะฐะปะธัะต ัะฐะนะป ะธะท Git: `git rm --cached .env`
2. ะะพะฑะฐะฒััะต ะฒ .gitignore
3. ะกะผะตะฝะธัะต ะะกะ ัะตะบัะตัั (ะะ ะฟะฐัะพะปะธ, JWT, API ะบะปััะธ)
4. Force push (ะตัะปะธ ะตัะต ะฝะต ะฒ main): `git push --force`
5. ะกะพะพะฑัะธัะต ะบะพะผะฐะฝะดะต

### Q: ะะพะถะฝะพ ะปะธ ะดะตัะถะฐัั ัะฐะทะฝัะต env.example ะดะปั ะพะบััะถะตะฝะธะน?

**A:** ะะตั ะฝะตะพะฑัะพะดะธะผะพััะธ. ะะดะธะฝ `env.example` ัะพะดะตัะถะธั ะะกะ ะฟะตัะตะผะตะฝะฝัะต ั ะบะพะผะผะตะฝัะฐัะธัะผะธ ะดะปั ะบะฐะถะดะพะณะพ ะพะบััะถะตะฝะธั:

```env
# ะะพะบะฐะปัะฝะพ:
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/fin_u_ch_dev

# Production (ะฟัะธะผะตั):
# DATABASE_URL=postgresql://user:pass@prod-db:5432/fin_u_ch
```

## โ Checklist ะดะปั ะฝะพะฒัั ัะฐะทัะฐะฑะพััะธะบะพะฒ

- [ ] ะกะบะปะพะฝะธัะพะฒะฐะป ะฟัะพะตะบั: `git clone ...`
- [ ] ะฃััะฐะฝะพะฒะธะป ะทะฐะฒะธัะธะผะพััะธ: `pnpm install`
- [ ] ะกะพะทะดะฐะป .env: `pnpm env:setup` (ัะฐะฑะพัะฐะตั ะฝะฐ Windows/macOS/Linux!)
- [ ] ะัะพะฒะตัะธะป ััะพ `.env` ะฒ `.gitignore` (ัะถะต ะฝะฐัััะพะตะฝะพ)
- [ ] ะัะพะฒะตัะธะป ะพะบััะถะตะฝะธะต: `pnpm env:current`
- [ ] ะะปั ะปะพะบะฐะปัะฝะพะน ัะฐะทัะฐะฑะพัะบะธ - ะพััะฐะฒะธะป ะทะฝะฐัะตะฝะธั ะบะฐะบ ะตััั
- [ ] ะะปั production - ะฟะพะปััะธะป credentials ะพั ะบะพะผะฐะฝะดั
- [ ] ะะฐะฟัััะธะป ะธะฝััะฐััััะบัััั: `docker-compose -f ops/docker/docker-compose.yml up -d`
- [ ] ะะฐะฟัััะธะป ะฟัะพะตะบั: `pnpm dev`
- [ ] ะะพัะพะฒะพ! โจ

## ะะพะฟะพะปะฝะธัะตะปัะฝัะต ัะตััััั

- [ENV Hot Reload](ENV_HOT_RELOAD.md) - ะะพัััะฐั ะฟะตัะตะทะฐะณััะทะบะฐ ะฟะตัะตะผะตะฝะฝัั
- [ENV Cheatsheet](ENV_CHEATSHEET.md) - ะััััะฐั ัะฟะฐัะณะฐะปะบะฐ
- [dotenv ะดะพะบัะผะตะฝัะฐัะธั](https://github.com/motdotla/dotenv)
- [Vite env ะฟะตัะตะผะตะฝะฝัะต](https://vitejs.dev/guide/env-and-mode.html)
- [12-Factor App Config](https://12factor.net/config)
- [OWASP Secrets Management](https://cheatsheetseries.owasp.org/cheatsheets/Secrets_Management_Cheat_Sheet.html)
