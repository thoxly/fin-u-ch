# CashflowTable - История изменений

## Версия 2.0 - Полный рефакторинг (2025-10-16)

### Основные изменения

#### 1. Интерфейс и UX

- ✅ Тогл "Показать план" перенесён в верхнюю панель фильтров
- ✅ Добавлен компактный монохромный дизайн с серыми оттенками
- ✅ Уменьшен размер шрифта (text-xs) для более плотного отображения данных
- ✅ Убраны вертикальные разделители между ячейками

#### 2. План/Факт режим

- ✅ При включении "Показать план" каждый месяц разделяется на два подстолбца: План | Факт
- ✅ Плановые значения отображаются серым цветом (text-gray-500)
- ✅ Фактические значения отображаются чёрным цветом (text-gray-900)

#### 3. Горизонтальный скролл

- ✅ Скролл работает только внутри контейнера таблицы (overflow-x-auto)
- ✅ Первый столбец "Статья" зафиксирован (sticky left-0)
- ✅ Последний столбец "Итого" зафиксирован (sticky right-0)

#### 4. Структура таблицы

- Accordion для разворачивания видов деятельности (Operating/Investing/Financing)
- Детализация по статьям доходов и расходов
- Итоговые строки:
  - Общий денежный поток
  - Остаток на конец периода (кумулятивный)

### Технические детали

**Компоненты:**

- `CashflowTable.tsx` - основной компонент таблицы
- `index.ts` - экспорт компонента

**Пропсы:**

```typescript
interface CashflowTableProps {
  data: CashflowReport; // Данные о фактических операциях
  planData?: BDDSReport; // Данные о планах (опционально)
  showPlan?: boolean; // Показывать ли план
  onTogglePlan?: (showPlan: boolean) => void; // Обработчик переключения
  periodFrom: string; // Начало периода
  periodTo: string; // Конец периода
}
```

**Стилизация:**

- Использует Tailwind CSS
- Монохромная палитра (оттенки серого)
- Минимальные вертикальные границы
- Только горизонтальные разделители между строками

### Использование

```tsx
import { CashflowTable } from '../widgets/CashflowTable';

<CashflowTable
  data={cashflowData}
  planData={bddsData}
  showPlan={showPlan}
  onTogglePlan={setShowPlan}
  periodFrom="2024-01-01"
  periodTo="2024-12-31"
/>;
```
