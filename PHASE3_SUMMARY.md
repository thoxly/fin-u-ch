# –§–ê–ó–ê 3: Backend API - –°–≤–æ–¥–∫–∞

## ‚úÖ –°—Ç–∞—Ç—É—Å: –ó–ê–í–ï–†–®–ï–ù–ê

–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω Backend API –¥–ª—è —Å–∏—Å—Ç–µ–º—ã —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ —É—á–µ—Ç–∞.

## –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### üèó –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

- Express API —Å TypeScript
- Prisma ORM + PostgreSQL
- Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- Winston –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- Docker-compose –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

- JWT —Ç–æ–∫–µ–Ω—ã (access + refresh)
- Bcrypt —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- Multi-tenant –∏–∑–æ–ª—è—Ü–∏—è –ø–æ companyId

### üìä –ú–æ–¥—É–ª–∏ (–≤—Å–µ–≥–æ 15 endpoints)

**Auth**: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –ª–æ–≥–∏–Ω, refresh  
**Users & Companies**: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –∫–æ–º–ø–∞–Ω–∏—è–º–∏  
**Catalogs** (6 —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤): articles, accounts, departments, counterparties, deals, salaries  
**Operations**: —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–¥–æ—Ö–æ–¥, —Ä–∞—Å—Ö–æ–¥, –ø–µ—Ä–µ–≤–æ–¥)  
**Plans**: –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î–î–° —Å –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è–º–∏  
**Reports** (4 –æ—Ç—á–µ—Ç–∞): dashboard, cashflow, BDDS, planfact

### üìà –û—Ç—á–µ—Ç–Ω–æ—Å—Ç—å

- Dashboard: –æ–±—â–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ + –æ—Å—Ç–∞—Ç–∫–∏ –ø–æ —Å—á–µ—Ç–∞–º
- Cashflow (–û–î–î–°): —Ñ–∞–∫—Ç –ø–æ –º–µ—Å—è—Ü–∞–º
- BDDS: –ø–ª–∞–Ω —Å —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ–º –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π
- PlanFact: —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–ª–∞–Ω vs —Ñ–∞–∫—Ç —Å –¥–µ–ª—å—Ç–æ–π

### ‚ö° –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤ –≤ Redis (TTL 5 –º–∏–Ω)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–∞–ª—é—Ç
- –ò–µ—Ä–∞—Ä—Ö–∏—è —Å—Ç–∞—Ç–µ–π
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ 6+ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–§–∞–π–ª–æ–≤ —Å–æ–∑–¥–∞–Ω–æ**: ~80
- **–ú–æ–¥–µ–ª–µ–π –ë–î**: 9
- **API endpoints**: ~60
- **Middleware**: 3
- **–°—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞**: ~3000+

## –ó–∞–ø—É—Å–∫

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å Docker
cd ops/docker && docker compose up -d

# 2. –°–æ–∑–¥–∞—Ç—å .env (—Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏–∑ .env.example)

# 3. –ú–∏–≥—Ä–∞—Ü–∏–∏
cd apps/api && npx prisma migrate dev --name init

# 4. –ó–∞–ø—É—Å–∫ API
pnpm --filter api dev
```

API –¥–æ—Å—Ç—É–ø–µ–Ω: `http://localhost:4000`  
Swagger: `http://localhost:4000/api-docs`

## –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥

**–§–ê–ó–ê 4**: Worker –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞—Ä–ø–ª–∞—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π)

---

–ü–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç—á–µ—Ç: [docs/PHASE3_RESULTS.md](docs/PHASE3_RESULTS.md)
