# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: –ó–∞—â–∏—Ç–∞ –ø—Ä–æ–µ–∫—Ç–∞

## ‚úÖ –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ

–Ø —Å–æ–∑–¥–∞–ª –¥–ª—è –≤–∞—Å **–ø–æ–ª–Ω—É—é —Å–∏—Å—Ç–µ–º—É –∑–∞—â–∏—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞**:

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (4 —Ñ–∞–π–ª–∞)

- `docs/PROTECTION_SUMMARY.md` - **–ù–ê–ß–ù–ò–¢–ï –û–¢–°–Æ–î–ê!**
- `docs/BACKUP_STRATEGY.md` - –ü–æ–ª–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –±—ç–∫–∞–ø–æ–≤
- `docs/GITHUB_PROTECTION_CHECKLIST.md` - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub
- `scripts/README.md` - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∫—Ä–∏–ø—Ç–æ–≤

### üîß –°–∫—Ä–∏–ø—Ç—ã (5 —Ñ–∞–π–ª–æ–≤)

- `scripts/backup-db.sh` - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±—ç–∫–∞–ø –ë–î
- `scripts/restore-db.sh` - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞
- `scripts/check-backups.sh` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –±—ç–∫–∞–ø–æ–≤
- `scripts/setup-backups.sh` - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
- `scripts/check-protection.sh` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã –≤ Git –∏ –≥–æ—Ç–æ–≤—ã –∫ push.

---

## üéØ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å (3 –ø—Ä–æ—Å—Ç—ã—Ö —à–∞–≥–∞)

### –®–∞–≥ 1: –ó–∞–ø—É—à–∏—Ç—å –≤ GitHub (1 –º–∏–Ω—É—Ç–∞)

```bash
cd /Users/shoxy/Projects/fin-u-ch
git push origin main
```

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Branch Protection –Ω–∞ GitHub (10 –º–∏–Ω—É—Ç)

1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://github.com/thoxly/fin-u-ch/settings/branches
2. –ù–∞–∂–º–∏—Ç–µ **"Add branch protection rule"**
3. Branch name pattern: `main`
4. –í–∫–ª—é—á–∏—Ç–µ:
   - ‚úÖ Require a pull request before merging (1 approval)
   - ‚úÖ Require status checks to pass before merging
   - ‚úÖ Require conversation resolution before merging
   - ‚úÖ Include administrators
   - ‚ùå Allow force pushes (–û–°–¢–ê–í–ò–¢–¨ –í–´–ö–õ–Æ–ß–ï–ù–ù–´–ú!)
   - ‚ùå Allow deletions (–û–°–¢–ê–í–ò–¢–¨ –í–´–ö–õ–Æ–ß–ï–ù–ù–´–ú!)
5. –ù–∞–∂–º–∏—Ç–µ **"Create"**

**–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è**: –°–º. `docs/GITHUB_PROTECTION_CHECKLIST.md`

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã –Ω–∞ VPS (5 –º–∏–Ω—É—Ç)

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ VPS
ssh root@83.166.244.139

# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /opt/fin-u-ch

# –°–∫–∞—á–∞–π—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git pull origin main

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫—É –±—ç–∫–∞–ø–æ–≤
sudo ./scripts/setup-backups.sh

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç
./scripts/check-protection.sh
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç

### –õ–æ–∫–∞–ª—å–Ω–æ (–ø—Ä—è–º–æ —Å–µ–π—á–∞—Å)

```bash
cd /Users/shoxy/Projects/fin-u-ch

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –∑–∞—â–∏—Ç—ã
./scripts/check-protection.sh

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
open docs/PROTECTION_SUMMARY.md
```

### –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞ GitHub

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä—è–º–æ–π push –≤ main (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω):

```bash
echo "test" >> test.txt
git add test.txt
git commit -m "test"
git push origin main  # ‚ùå –î–æ–ª–∂–µ–Ω –±—ã—Ç—å rejected
```

–ï—Å–ª–∏ push –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω - –∑–∞—â–∏—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç! üéâ

### –ù–∞ VPS (–ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—ç–∫–∞–ø–æ–≤)

```bash
ssh root@83.166.244.139
cd /opt/fin-u-ch

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±—ç–∫–∞–ø—ã
./scripts/check-backups.sh

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –±—ç–∫–∞–ø—ã
ls -lht /opt/fin-u-ch/backups/

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å cron –∑–∞–¥–∞—á–∏
crontab -l
```

---

## üìä –£—Ä–æ–≤–Ω–∏ –∑–∞—â–∏—Ç—ã

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ —É –≤–∞—Å –±—É–¥–µ—Ç:

```
‚úÖ Git Version Control      - –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π, –æ—Ç–∫–∞—Ç –∫–æ–¥–∞
‚úÖ GitHub Branch Protection - –ó–∞—â–∏—Ç–∞ –æ—Ç –ø—Ä—è–º—ã—Ö pushes
‚úÖ CI/CD Pipeline           - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥–∞
‚úÖ Docker Images Versioning - –û—Ç–∫–∞—Ç –≤–µ—Ä—Å–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚úÖ Automated DB Backups     - –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –±—ç–∫–∞–ø—ã –ë–î
‚úÖ Recovery Procedures      - –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã
‚úÖ Monitoring Scripts       - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
```

**–û–±—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ**: 100% üéØ

---

## üö® –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–π–¥—ë—Ç –Ω–µ —Ç–∞–∫

### –ï—Å–ª–∏ –Ω–∞–∫–æ—Å—è—á–∏–ª–∏ –≤ –∫–æ–¥–µ

**–û—Ç–∫–∞—Ç –∑–∞ 2 –º–∏–Ω—É—Ç—ã**:

```bash
# –ù–∞ VPS
ssh root@83.166.244.139
cd /opt/fin-u-ch

# –ù–∞–π—Ç–∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ä–∞–±–æ—á–∏–π commit
git log --oneline -10

# –ò–∑–º–µ–Ω–∏—Ç—å IMAGE_TAG –≤ .env
nano .env
# IMAGE_TAG=<previous-commit-hash>

# –ü–µ—Ä–µ–¥–µ–ø–ª–æ–∏—Ç—å
docker compose -f docker-compose.prod.yml pull
docker compose -f docker-compose.prod.yml up -d --no-deps --force-recreate api web worker
```

### –ï—Å–ª–∏ –ø–æ—Ç–µ—Ä—è–ª–∏ –¥–∞–Ω–Ω—ã–µ –≤ –ë–î

**–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞ 5 –º–∏–Ω—É—Ç**:

```bash
# –ù–∞ VPS
ssh root@83.166.244.139
cd /opt/fin-u-ch

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –±—ç–∫–∞–ø
./scripts/restore-db.sh
```

### –ü–æ–ª–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

–°–º. `docs/BACKUP_STRATEGY.md` ‚Üí —Ä–∞–∑–¥–µ–ª "–ü—Ä–æ—Ü–µ–¥—É—Ä—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è"

---

## üìÖ –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (5 –º–∏–Ω—É—Ç)

–î–æ–±–∞–≤—å—Ç–µ –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é:

```bash
# –ù–∞ VPS
ssh root@83.166.244.139
cd /opt/fin-u-ch

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É
./scripts/check-protection.sh

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±—ç–∫–∞–ø—ã
./scripts/check-backups.sh

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker compose logs --tail=100
```

**–ù–∞ GitHub**:

- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å https://github.com/thoxly/fin-u-ch/security
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å https://github.com/thoxly/fin-u-ch/actions

---

## üìö –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–î–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∏–∑—É—á–µ–Ω–∏—è —Å–º.:

1. **[PROTECTION_SUMMARY.md](docs/PROTECTION_SUMMARY.md)** - –ù–∞—á–Ω–∏—Ç–µ –æ—Ç—Å—é–¥–∞!
2. **[BACKUP_STRATEGY.md](docs/BACKUP_STRATEGY.md)** - –ü–æ–ª–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è
3. **[GITHUB_PROTECTION_CHECKLIST.md](docs/GITHUB_PROTECTION_CHECKLIST.md)** - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub
4. **[scripts/README.md](scripts/README.md)** - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∫—Ä–∏–ø—Ç–æ–≤
5. **[PHASE11_PROTECTION_SETUP.md](docs/PHASE11_PROTECTION_SETUP.md)** - –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

---

## üéâ –ò—Ç–æ–≥–æ

**–°–æ–∑–¥–∞–Ω–æ**:

- üìÑ 4 –¥–æ–∫—É–º–µ–Ω—Ç–∞ (~15,000 —Å–ª–æ–≤)
- üîß 5 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
- üõ°Ô∏è 5 —É—Ä–æ–≤–Ω–µ–π –∑–∞—â–∏—Ç—ã
- ‚è±Ô∏è –í—Ä–µ–º—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è: 2-30 –º–∏–Ω—É—Ç

**–í–∞—à–µ –≤—Ä–µ–º—è**:

- –ó–∞–ø—É—à–∏—Ç—å –≤ GitHub: 1 –º–∏–Ω
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Branch Protection: 10 –º–∏–Ω
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±—ç–∫–∞–ø—ã –Ω–∞ VPS: 5 –º–∏–Ω
- **–ò—Ç–æ–≥–æ: 16 –º–∏–Ω—É—Ç**

**–†–µ–∑—É–ª—å—Ç–∞—Ç**:

- ‚úÖ –ü–æ–ª–Ω–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–æ—Ç–µ—Ä–∏ –∫–æ–¥–∞
- ‚úÖ –ü–æ–ª–Ω–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ë—ã—Å—Ç—Ä–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
- ‚úÖ –°–ø–æ–∫–æ–π–Ω—ã–π —Å–æ–Ω! üò¥

---

**P.S.** –≠—Ç–æ—Ç —Ñ–∞–π–ª –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤. –í—Å—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ `docs/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.

–£—Å–ø–µ—Ö–æ–≤! üöÄ
